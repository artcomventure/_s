{"version":3,"file":"inline-svg.min.js","names":["Behaviours","add","$context","replaceImage","$image","test","src","xhr","XMLHttpRequest","open","onload","e","status","responseXML","documentElement","$svg","forEach","call","attributes","attribute","indexOf","name","classList","className","setAttribute","value","remove","parentElement","replaceChild","$figure","closest","window","requestAnimationFrame","dispatchEvent","CustomEvent","detail","bubbles","send","$images","constructor","getElementsByTagName","contains","addEventListener","target","passive"],"sources":["inline-svg.js"],"sourcesContent":["// ---\n// Replace SVG image with actual SVG code.\n\nBehaviours.add( 'media:inline-svg', function( $context ) {\n\n    const replaceImage = function( $image ) {\n        if ( !$image || /^data:/.test( $image.src ) ) return;\n\n        const xhr = new XMLHttpRequest();\n        xhr.open(\"GET\", $image.src );\n        xhr.onload = function (e) {\n            if ( xhr.status === 200 && !!(xhr.responseXML||{}).documentElement ) {\n                const $svg = xhr.responseXML.documentElement;\n\n                // take over _all_ attributes\n                [].forEach.call( $image.attributes, function( attribute ) {\n                    // igmore _these_ attributes\n                    if ( ['src'].indexOf( attribute.name ) >= 0 ) return;\n                    // set classNames\n                    else if ( attribute.name === 'class' )\n                        $image.classList.forEach( ( className ) => $svg.classList.add( className ) );\n                    // set all other attributes\n                    else $svg.setAttribute( attribute.name, attribute.value );\n                } );\n\n                $svg.setAttribute( 'preserveAspectRatio', 'xMidYMid slice' );\n\n                $svg.classList.remove( 'inline-svg', 'lazyload', 'lazyloading' );\n\n                // replace image with svg\n                if ( $image && $image.parentElement ) {\n                    $image.parentElement.replaceChild( $svg, $image );\n\n                    const $figure = $svg.closest( '.inline-svg' );\n                    if ( $figure ) $figure.classList.remove( 'inline-svg' );\n\n                    window.requestAnimationFrame( () => $svg.dispatchEvent( new CustomEvent( 'inline-svg', { detail: $svg, bubbles: true } ) ) );\n                }\n            }\n        }\n        xhr.send(\"\");\n    };\n\n    let $images; // get images\n    if ( ['HTMLCollection', 'NodeList'].indexOf( $context.constructor.name ) >= 0 ) $images = $context;\n    else $images = $context.getElementsByTagName( 'img' );\n\n    [].forEach.call( $images, function( $image ) {\n        if ( !($image.classList.contains( 'inline-svg' ) || $image.closest( '.inline-svg' )) ) return;\n\n        replaceImage( $image );\n        $image.addEventListener( 'load', function( e ) {\n            replaceImage( e.target );\n        }, { passive: true } );\n    } );\n\n} );"],"mappings":"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"}