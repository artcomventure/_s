"use strict";(function(){var a=document.getElementsByClassName("file-drop--zone");window.addEventListener("dragover",function(){[].forEach.call(a,function(a){a.classList.add("drop-here")})}),window.addEventListener("dragleave",function(){[].forEach.call(a,function(a){a.classList.remove("drop-here")})}),Behaviours.add("file-drop",function(b){b.querySelectorAll("input[type=file]").forEach(function(b){b.addEventListener("change",function(){e.innerHTML="",[].forEach.call(b.files,function(a){var c=document.createElement("li");c.innerHTML="".concat(a.name," "),c.setAttribute("data-type",a.type);var d=document.createElement("span");d.innerHTML="&times;",d.setAttribute("role","button"),d.setAttribute("tabindex","0"),d.setAttribute("aria-label",wp.i18n.__("Remove File","file-drop")),["click","keydown"].forEach(function(c){d.addEventListener(c,function(c){if("keydown"!==c.type||"Enter"===c.key){c.stopPropagation();var e=new DataTransfer;[].forEach.call(b.files,function(b){a===b||e.items.add(b)}),b.files=e.files,d.parentElement.remove()}})}),c.appendChild(d),e.appendChild(c)})});var c=document.createElement("div");c.classList.add("file-drop");var d=document.createElement("div");d.classList.add("file-drop--zone"),d.setAttribute("role","button"),d.setAttribute("tabindex",0),c.prepend(d),d.innerHTML="<span class=\"file-drop--text\">"+Alter["do"]("file-drop-zone-text",b.hasAttribute("multiple")?wp.i18n.__("Drag and drop the files here<br />or click to select the files.","file-drop"):wp.i18n.__("Drag and drop the file here<br />or click to select the file.","file-drop"),b)+"</span>";var e=document.createElement("ul");e.classList.add("file-drop--files"),c.appendChild(e),b.before(c),["click","keydown"].forEach(function(a){return d.addEventListener(a,function(a){"keydown"===a.type&&"Enter"!==a.key||b.dispatchEvent(new MouseEvent("click"))})}),d.addEventListener("dragover",function(a){a.preventDefault(),d.classList.add("is-dragover")}),d.addEventListener("dragleave",function(){d.classList.remove("is-dragover")}),d.addEventListener("drop",function(c){c.preventDefault(),d.classList.remove("is-dragover");var e=c.dataTransfer.files;if(e.length){var f=new DataTransfer;if(b.files=e,b.dispatchEvent(new Event("change",{bubbles:!0})),[].forEach.call(e,function(a){if(b.hasAttribute("accept")){var c=b.getAttribute("accept").split(/\s*,\s*/);c.forEach(function(b){(new RegExp("".concat(b,"$")).test(a.name)||new RegExp(b).test(a.type))&&f.items.add(a)})}}),(e=f.files).length&&!b.hasAttribute("multiple")){for(;f.items[1];)f.items.remove(1);e=f.files}}b.files=e,b.dispatchEvent(new Event("change")),[].forEach.call(a,function(a){a.classList.remove("drop-here")})})})})})();