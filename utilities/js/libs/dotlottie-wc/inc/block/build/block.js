(()=>{"use strict";const t=window.React,e=window.wp.i18n,o=window.wp.blocks,l=window.wp.blockEditor,a=window.wp.components,n=window.wp.compose,i=window.wp.data,d=window.wp.element,r=(0,n.compose)([(0,n.withState)(),(0,i.withSelect)(((t,e)=>({...e})))])((({attributes:o,setAttributes:n,setState:i,...r})=>{const c=(0,d.useRef)();return(0,d.useEffect)((()=>{if(c.current.dotLottie.isLoaded){const t=c.current.dotLottie.animationSize();c.current.dotLottie.canvas.width=t.width,c.current.dotLottie.canvas.height=t.height,c.current.dotLottie.resize()}})),(0,t.createElement)(t.Fragment,null,(0,t.createElement)(l.InspectorControls,null,(0,t.createElement)(a.PanelBody,{title:(0,e.__)("DotLottie Settings","dotlottie")},(0,t.createElement)(l.MediaUploadCheck,null,(0,t.createElement)(l.MediaUpload,{onSelect:t=>{n({attachment_id:t.id}),n({src:t.url})},allowedTypes:["application/zip"],value:o.attachment_id,render:({open:l})=>(0,t.createElement)(a.Button,{__next40pxdefaultsize:!0,variant:"secondary",onClick:l},o.attachment_id?(0,e.__)("Change file","dotlottie"):(0,e.__)("Select file","dotlottie"))})),(0,t.createElement)("p",{className:"components-base-control__help"},(0,t.createElement)("i",null,(0,e.__)("In the editor, the animation is always played automatically and looped for preview purposes.","dotlottie"))),(0,t.createElement)(a.SelectControl,{label:(0,e.__)("Start animation","dotlottie"),disabled:!o.src,value:o.start,options:[{label:(0,e.__)("on file load","dotlottie"),value:"autoplay"},{label:(0,e.__)("on click","dotlottie"),value:"click"},{label:(0,e.__)("on hover","dotlottie"),value:"mouseover"},{label:(0,e.__)("on custom event","dotlottie"),value:"custom"}],onChange:t=>n({start:t})}),(0,t.createElement)(a.ToggleControl,{label:(0,e.__)("Loop","dotlottie"),disabled:!o.src,checked:o.loop,onChange:t=>n({loop:t})}),(0,t.createElement)(a.ToggleControl,{label:(0,e.__)("Lazy Loading","dotlottie"),help:(0,e.__)("The file is only loaded when it is immediately needed.","dotlottie"),disabled:!o.src,checked:o.lazyload,onChange:t=>n({lazyload:t})}))),(0,t.createElement)("dotlottie-wc",{src:o.src,speed:o.speed,autoplay:!0,loop:!0,ref:c}))}));(0,o.registerBlockType)("dotlottie/wc",{title:(0,e.__)("DotLottie","dotlottie"),description:(0,e.__)("Web component that allows you to easily embed Lottie animations.","dotlottie"),icon:{src:(0,t.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 78.04 78.22"},(0,t.createElement)("path",{fill:"#00ddb3",d:"M58.29,0H19.74C8.84,0,0,8.86,0,19.79v38.64c0,10.93,8.84,19.79,19.74,19.79h38.55c10.9,0,19.74-8.86,19.74-19.79V19.79c0-10.93-8.84-19.79-19.74-19.79Z"}),(0,t.createElement)("path",{fill:"#fff",d:"M59.31,17.52c-13.43,0-18.41,9.61-22.41,17.34l-2.61,4.94c-4.24,8.19-7.4,13.17-15.57,13.17-.51,0-1.01.1-1.48.29-.47.19-.89.48-1.25.84-.36.36-.64.79-.84,1.25-.19.47-.29.97-.29,1.48,0,1.03.41,2.01,1.13,2.73.72.72,1.7,1.13,2.73,1.13,13.44,0,18.42-9.61,22.42-17.34l2.61-4.94c4.24-8.19,7.41-13.17,15.57-13.17.51,0,1.01-.1,1.48-.29.47-.19.89-.48,1.25-.84.36-.36.64-.79.84-1.26.19-.47.29-.97.29-1.48,0-1.03-.41-2.01-1.13-2.73-.72-.73-1.71-1.13-2.73-1.13Z"}))},category:"media",supports:{align:["wide","full"],anchor:!0},attributes:{attachment_id:{type:"number",default:""},src:{type:"string",default:""},start:{type:"string",default:"autoplay"},loop:{type:"boolean",default:!1},speed:{type:"number",default:1},mode:{type:"string",default:"forward"},backgroundColor:{type:"string",default:""},lazyload:{type:"boolean",default:!0}},edit:e=>(0,t.createElement)(r,{...e}),save:function({attributes:e}){const o={"data-src":e.src};return e.lazyload?o["data-src"]=e.src:o.src=e.src,"autoplay"===e.start?o.autoplay="":o["data-start"]=e.start,e.loop&&(o.loop=""),(0,t.createElement)("dotlottie-wc",{...o})}})})();