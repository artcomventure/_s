import { registerFormatType, toggleFormat } from '@wordpress/rich-text';
import { RichTextToolbarButton } from '@wordpress/block-editor';
import { __ } from '@wordpress/i18n';

registerFormatType( 'odometer/format', {
  title: __( 'Odometer', 'odometer' ),
  tagName: 'span',
  className: 'odometer',
  edit: ( { isActive, onChange, value } ) => {
    return (
      <RichTextToolbarButton
        icon={ <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 285.68 119.8">
          <path d="M285.68,13.74c0-7.84-6.38-13.73-14.38-13.73H14.44C6.05,0,0,6.32,0,14.34v91.13c0,8.01,6.06,14.33,14.44,14.33h256.85c7.89,0,14.38-5.74,14.38-13.91V13.74ZM227.47,13.8c4.24-.73,7.96-.46,12.53-.17.74,3.92.13,7.19.38,12.4-4.34.91-8.37.64-12.92.18-.46-4.39-.53-7.98.01-12.41ZM14.16,106.37l-.15-92.87,76.92-.1.25,92.69-77.02.28ZM104.8,106.37l-.21-92.87,76.98-.11.17,92.7-76.94.27ZM227.47,105.99c-.52-4.46-.49-8.04,0-12.39,4.24-.62,7.93-.39,12.5-.15.82,3.84.15,7.1.43,12.32-4.3.99-8.38.71-12.93.23ZM254.18,106.13c-.81-5.42-.08-9.85-.41-14.77-.43-6.59-5.47-11.56-12.18-11.57l-15.04-.04c-7.59-.02-12.92,5.47-12.94,13.02l-.04,13.26c-6.14.48-11.77.51-18.34-.02V13.76c6.56-.58,12.24-.54,18.34-.03l.11,14.34c.05,6.63,5.17,11.88,11.85,11.91l15.03.07c7.52.04,13.12-5.02,13.29-12.44.1-4.57-.38-8.91.33-13.91,6.1-.52,11.43-.36,18.02-.09l.13,92.03c-5.96,1.38-11.78.51-18.15.48Z"/>
          <path d="M156.61,26.6h-26.76c-4.19,0-6.82,3.44-6.68,6.9.14,3.5,2.62,6.43,6.6,6.47l19.9.22.18,46.64c.02,4.11,3.72,6.59,7.15,6.33,3.13-.25,6.23-2.71,6.23-6.96l-.03-53.04c0-3.63-3.06-6.57-6.58-6.57Z"/>
          <path d="M59.99,26.53h-15.02c-7.08.01-12.46,5.32-12.46,12.44v41.87c0,7.08,5.4,12.43,12.46,12.41l15.56-.03c7.16-.01,12.1-5.63,12.11-12.37v-41.9c0-7.21-5.52-12.43-12.65-12.42ZM46.04,79.54v-39.26c4.54-.39,8.46-.43,13.03.04l.1,39.08c-4.65.7-8.57.46-13.13.14Z"/>
        </svg> }
        title={ __( 'Odometer', 'odometer' ) }
        onClick={ () => {
          onChange(
            toggleFormat( value, {
              type: 'odometer/format'
            } )
          );
        } }
        isActive={ isActive }
      />
    );
  },
} );