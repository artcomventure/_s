"use strict";var _airDatepicker=_interopRequireDefault(require("./module/air-datepicker")),_de=_interopRequireDefault(require("./module/locale/de")),_en=_interopRequireDefault(require("./module/locale/en"));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var locale=(document.documentElement.getAttribute("lang")||"en").split("-")[0];Behaviours.add("datepicker",function(a){[].forEach.call(a.querySelectorAll("input[type=\"date\"]"),function(a){var b=Alter["do"]("airDatepicker:options",{selectedDates:[Date.parse(a.value)],dateFormat:phpDateFormatToJs(a.getAttribute("data-format")||""),minDate:a.getAttribute("min")||"",maxDate:a.getAttribute("max")||"",locale:{de:_de["default"],en:_en["default"]}[locale],position:"bottom center",buttons:["today"],onSelect:function onSelect(b){var c=b.date,d=b.formattedDate,e=b.datepicker;a.dispatchEvent(new CustomEvent("airDatepicker:select",{detail:{date:c,formattedDate:d,datepicker:e},bubbles:!0}))}},a),c=a.cloneNode(!0);c.setAttribute("type","text"),c.removeAttribute("name"),c.setAttribute("readonly","readonly"),c.addEventListener("keydown",function(a){"Backspace"!==a.key||d.update({value:""})}),b.altField=a,b.altFieldDateFormat="yyyy-MM-dd";var d=new _airDatepicker["default"](c,b);a.dispatchEvent(new CustomEvent("datepicker:init",{detail:{dp:d,options:b},bubbles:!0})),a.setAttribute("hidden",""),a.after(c)})});function phpDateFormatToJs(a){var b={j:"d",d:"dd",D:"E",l:"EEEE",n:"M",m:"MM",M:"MMM",F:"MMMM",y:"yy",Y:"yyyy",o:"yyyy",g:"h",G:"H",h:"hh",H:"HH",i:"mm",A:"AA",a:"AA"};return a.replace(/[a-z]+/ig,function(a){return a in b?b[a]:a})}