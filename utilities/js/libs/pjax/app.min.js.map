{"version":3,"file":"app.min.js","names":["Pjax","window","pjax","elements","Alter","selectors","switches","primary","oldEl","newEl","options","$html","document","createElement","innerHTML","request","responseText","$body","querySelector","forEach","attribute","value","match","RegExp","concat","getElementsByTagName","removeAttribute","setAttribute","className","body","replaceWith","onSwitch","cacheBust","currentUrlFullReload","debug","history","scrollRestoration","scrollTo","_handleResponse","handleResponse","href","setTimeout","$overlay","getElementById","id","style","display","appendChild","CSS","getComputedStyle","pjaxTransitionDuration","parseFloat","getPropertyValue","addEventListener","e","requestAnimationFrame","mejs","Object","keys","players","player","paused","pause","remove","ScrollTrigger","killAll","top","behavior","passive","documentElement","overflow","pointerEvents","hasAttribute","Behaviours","attach"],"sources":["app.js"],"sourcesContent":["// ---\n// Pjax. AJAX navigation.\n\n(function() {\n\n    if ( typeof Pjax === 'undefined' ) return;\n\n    // elements to be updated\n    window.pjax = new Pjax( {\n        // don't _pjax_ links to WP backend and _download links_\n        elements: Alter.do( 'pjax-elements', 'a[href]:not(.no-pjax):not([href*=\"/wp-admin/\"]):not([href$=\".pdf\"]):not([href$=\".vcf\"]):not([href$=\".jpg\"]):not([href$=\".gif\"]):not([href$=\".png\"]):not([href$=\".webp\"]):not([href$=\".zip\"]), form[action]' ),\n        selectors: Alter.do( 'pjax-selectors', [\n            'title',\n            '#masthead',\n            '#primary',\n            '#colophon',\n            '#wpadminbar'\n        ] ),\n        switches: Alter.do( 'pjax-switches', {\n            '#primary': function( oldEl, newEl, options ) {\n                const $html = document.createElement( 'html' );\n                $html.innerHTML = options.request.responseText;\n                const $body = $html.querySelector( 'body' );\n\n                // switch html attributes\n                ['lang', 'dir', 'class'].forEach( attribute => {\n                    let value = options.request.responseText.match( new RegExp( `<html.*${attribute}=\"([^\"]*)\"` ) );\n                    value = value ? value[1] : '';\n\n                    if ( value === '' ) {\n                        return document.getElementsByTagName( 'html' )[0].removeAttribute( attribute );\n                    }\n\n                    switch ( attribute ) {\n                        default:\n                            document.getElementsByTagName( 'html' )[0].setAttribute( attribute, value );\n                            break;\n\n                        case 'class':\n                            document.getElementsByTagName( 'html' )[0].className = value;\n                            break;\n                    }\n                } );\n\n                // switch body classes\n                document.body.className = $body.className;\n\n                oldEl.replaceWith( newEl );\n                this.onSwitch();\n            }\n        } ),\n        cacheBust: Alter.do( 'pjax-cacheBust', false ),\n        currentUrlFullReload: Alter.do( 'pjax-currentUrlFullReload', false ),\n        debug: Alter.do( 'pjax-debug', false ),\n        history: Alter.do( 'pjax-history', true ),\n        scrollRestoration: Alter.do( 'pjax-scrollRestoration', false ),\n        scrollTo: Alter.do( 'pjax-scrollTo', false ),\n    } );\n\n    // delay for transition\n    pjax._handleResponse = pjax.handleResponse;\n    pjax.handleResponse = function( responseText, request, href, options ) {\n        setTimeout( () => {\n            pjax._handleResponse( responseText, request, href, options )\n        }, 800 );\n    }\n\n    // get/create overlay for transition effect\n    let $overlay = document.getElementById( 'pjax-transition' );\n    if ( !$overlay ) {\n        $overlay = document.createElement( 'div' );\n        $overlay.id = 'pjax-transition';\n        $overlay.style.display = 'none';\n        document.body.appendChild( $overlay );\n    }\n\n    // get styles of `$overlay`\n    const CSS= getComputedStyle( $overlay );\n    // ... to extract `transition-duration` for `setTimeout` functions\n    const pjaxTransitionDuration= parseFloat( CSS.getPropertyValue( 'transition-duration' ) ) * 1000;\n\n    // Pjax request begins\n    document.addEventListener('pjax:send', function( e ) {\n        // fade out page (show overlay)\n        $overlay.style.display = '';\n        // for _some reason_ we need to wait 2 frames after _displaying_ the overlay\n        // before start fading\n        window.requestAnimationFrame( () => {\n            window.requestAnimationFrame(\n                () => document.body.setAttribute( 'data-pjax-transition', '' )\n            );\n        } );\n\n        setTimeout( function () {\n            // remove MediaElements aka video/audio\n            if ( typeof mejs !== 'undefined' ) Object.keys( mejs.players ).forEach( ( id ) => {\n                const player = mejs.players[id];\n                if ( !player.paused ) player.pause();\n                player.remove();\n            } );\n\n            // destroy all gsap ScrollTrigger\n            if ( typeof ScrollTrigger !== 'undefined' )\n                ScrollTrigger.killAll();\n\n            // jump to top\n            window.scrollTo({\n                top: 0,\n                behavior: 'instant'\n            } )\n        }, pjaxTransitionDuration );\n\n    }, { passive: true } );\n\n    // Pjax request finished\n    document.addEventListener('pjax:complete', function( e ) {\n        document.documentElement.style.overflow = '';\n\n        // fade in page (hide overlay)\n        window.requestAnimationFrame( () => {\n            $overlay.style.pointerEvents = 'none';\n            document.body.removeAttribute( 'data-pjax-transition' );\n\n            setTimeout( () => {\n                // next redirect is already in action\n                if ( document.body.hasAttribute( 'data-pjax-transition' ) ) return;\n\n                // prevent overlay to be rendered when it's not visible\n                $overlay.style.display = 'none';\n\n                $overlay.style.pointerEvents = '';\n            }, pjaxTransitionDuration );\n        } );\n    }, { passive: true } );\n\n    // Pjax request succeeds\n    document.addEventListener('pjax:success', function( e ) {\n        // re-attach all behaviours\n        window.requestAnimationFrame(\n            () => ['masthead', 'primary', 'colophon'].forEach( ( id ) => Behaviours.attach( document.getElementById( id ) ) )\n        );\n    }, { passive: true } );\n\n    // Pjax request fails\n    document.addEventListener('pjax:error', function( e ) {\n        // smth. went wrong ... so load requested page the GET way\n        // window.location = e.request.responseURL;\n    }, { passive: true } );\n\n})();"],"mappings":"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"}