{"version":3,"file":"app.min.js","names":["Pjax","prototype","getElements","document","querySelectorAll","window","pjax","selectors","switches","masthead","oldEl","newEl","options","replaceWith","$header","onSwitch","primary","$html","createElement","innerHTML","request","responseText","$body","querySelector","getElementsByTagName","setAttribute","classList","contains","getAttribute","body","className","scrollTo","cacheBust","scrollRestoration","_handleResponse","handleResponse","href","setTimeout","$overlay","getElementById","id","style","display","appendChild","CSS","getComputedStyle","pjaxTransitionDuration","parseFloat","getPropertyValue","addEventListener","e","requestAnimationFrame","mejs","Object","keys","players","forEach","player","paused","pause","remove","top","behavior","passive","pointerEvents","removeAttribute","Behaviours","attach"],"sources":["app.js"],"sourcesContent":["// ---\n// Pjax. AJAX navigation.\n\n(function() {\n\n    if ( typeof Pjax === 'undefined' ) return;\n\n    // don't _pjax_ links to WP backend and _download links_\n    Pjax.prototype.getElements = function() {\n        return document.querySelectorAll( 'a[href]:not([href*=\"/wp-admin/\"]):not([href$=\".pdf\"]):not([href$=\".vcf\"]), form[action]' );\n    }\n\n    // elements to be updated\n    window.pjax = new Pjax( {\n        selectors: [\n            'title',\n            '#masthead',\n            '#primary',\n            '#colophon',\n            '#wpadminbar'\n        ],\n        switches: {\n            '#masthead': function( oldEl, newEl, options ) {\n                oldEl.replaceWith( $header = newEl );\n                this.onSwitch();\n            },\n            '#primary': function( oldEl, newEl, options ) {\n                const $html = document.createElement( 'html' );\n                $html.innerHTML = options.request.responseText;\n                const $body = $html.querySelector( 'body' );\n\n                // switch html attributes\n                document.getElementsByTagName( 'html' )[0].setAttribute( 'dir', $body.classList.contains( 'rtl' ) ? 'rtl' : 'ltr' );\n                document.getElementsByTagName( 'html' )[0].setAttribute( 'lang', $body.getAttribute( 'data-lang' ) );\n\n                // switch body classes\n                document.body.className = $body.className;\n\n                oldEl.replaceWith( newEl );\n                this.onSwitch();\n            }\n        },\n        scrollTo: false,\n        cacheBust: false,\n        scrollRestoration: false\n    } );\n\n    // delay for transition\n    pjax._handleResponse = pjax.handleResponse;\n    pjax.handleResponse = function( responseText, request, href, options ) {\n        setTimeout( () => {\n            pjax._handleResponse( responseText, request, href, options )\n        }, 800 );\n    }\n\n    // get/create overlay for transition effect\n    let $overlay = document.getElementById( 'pjax-transition' );\n    if ( !$overlay ) {\n        $overlay = document.createElement( 'div' );\n        $overlay.id = 'pjax-transition';\n        $overlay.style.display = 'none';\n        document.body.appendChild( $overlay );\n    }\n\n    // get styles of `$overlay`\n    const CSS= getComputedStyle( $overlay );\n    // ... to extract `transition-duration` for `setTimeout` functions\n    const pjaxTransitionDuration= parseFloat( CSS.getPropertyValue( 'transition-duration' ) ) * 1000;\n\n    // Pjax request begins\n    document.addEventListener('pjax:send', function( e ) {\n        // fade out page (show overlay)\n        $overlay.style.display = '';\n        // for _some reason_ we need to wait 2 frames after _displaying_ the overlay\n        // before start fading\n        window.requestAnimationFrame( () => {\n            window.requestAnimationFrame(\n                () => document.body.setAttribute( 'data-pjax-transition', '' )\n            );\n        } );\n\n        setTimeout( function () {\n            // remove MediaElements aka video/audio\n            if ( typeof mejs !== 'undefined' ) Object.keys( mejs.players ).forEach( ( id ) => {\n                const player = mejs.players[id];\n                if ( !player.paused ) player.pause();\n                player.remove();\n            } );\n\n            // jump to top\n            window.scrollTo({\n                top: 0,\n                behavior: 'instant'\n            } )\n        }, pjaxTransitionDuration );\n\n    }, { passive: true } );\n\n    // Pjax request finished\n    document.addEventListener('pjax:complete', function( e ) {\n        // fade in page (hide overlay)\n        window.requestAnimationFrame( () => {\n            $overlay.style.pointerEvents = 'none';\n            document.body.removeAttribute( 'data-pjax-transition' );\n\n            setTimeout( () => {\n                // prevent overlay to be rendered when it's not visible\n                $overlay.style.display = 'none';\n\n                $overlay.style.pointerEvents = '';\n            }, pjaxTransitionDuration );\n        } );\n    }, { passive: true } );\n\n    // Pjax request succeeds\n    document.addEventListener('pjax:success', function( e ) {\n        // re-attach all behaviours\n        window.requestAnimationFrame(\n            () => ['masthead', 'primary', 'colophon'].forEach( ( id ) => Behaviours.attach( document.getElementById( id ) ) )\n        );\n    }, { passive: true } );\n\n    // Pjax request fails\n    document.addEventListener('pjax:error', function( e ) {\n        // smth. went wrong ... so load requested page the GET way\n        // window.location = e.request.responseURL;\n    }, { passive: true } );\n\n})();"],"mappings":"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"}