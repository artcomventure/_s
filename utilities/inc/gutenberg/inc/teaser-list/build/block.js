(()=>{"use strict";var e={n:t=>{var l=t&&t.__esModule?()=>t.default:()=>t;return e.d(l,{a:l}),l},d:(t,l)=>{for(var r in l)e.o(l,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:l[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.React,l=window.wp.i18n,r=window.wp.blocks,a=window.wp.blockEditor,s=window.wp.components,o=window.wp.data,n=window.wp.serverSideRender;var i=e.n(n);const p=window.wp.compose,c=window.wp.element,d=window.wp.primitives,u=(0,t.createElement)(d.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,t.createElement)(d.Path,{d:"M19 3H5c-.6 0-1 .4-1 1v7c0 .5.4 1 1 1h14c.5 0 1-.4 1-1V4c0-.6-.4-1-1-1zM5.5 10.5v-.4l1.8-1.3 1.3.8c.3.2.7.2.9-.1L11 8.1l2.4 2.4H5.5zm13 0h-2.9l-4-4c-.3-.3-.8-.3-1.1 0L8.9 8l-1.2-.8c-.3-.2-.6-.2-.9 0l-1.3 1V4.5h13v6zM4 20h9v-1.5H4V20zm0-4h16v-1.5H4V16z"})),m={post_type:{type:"string",default:"post"},posts_per_page:{type:"string",default:""},orderby:{type:"string",default:"date"},columns:{type:"string",default:"1"},more:{type:"string",default:""}},_=e=>{const t={...e};return Object.keys(t).map((e=>{m[e]&&m[e].default!==t[e]&&""!==t[e]||delete t[e]})),t};(0,r.registerBlockType)("teaser-list/preview",{title:(0,l.__)("Teaser List","teaser-list"),parent:["teaser-list/block"],attributes:m});const w=(0,p.compose)([(0,p.withState)(),(0,o.withSelect)(((e,t)=>{const{getPostTypes:l,getSite:r}=e("core");return m.posts_per_page.default=(r()||{}).posts_per_page||10,{post_types:(l({per_page:-1})||[]).filter((e=>e.viewable))}}))])((({post_types:e,attributes:r,setAttributes:o,...n})=>{const p=[];e.forEach((e=>p.push({value:e.slug,label:e.name})));const c=document.getElementById(`block-${n.clientId}`);return c&&c.setAttribute("data-grid",r.columns),(0,t.createElement)(t.Fragment,null,(0,t.createElement)(i(),{block:"teaser-list/preview",attributes:_(r)}),(0,t.createElement)(a.InspectorControls,null,(0,t.createElement)(s.PanelBody,{title:(0,l.__)("Settings"),className:"testimonial-settings-panel"},(0,t.createElement)(t.Fragment,null,(0,t.createElement)(s.SelectControl,{label:(0,l.__)("Post type"),value:r.post_type,options:p,onChange:e=>o({post_type:e})}),(0,t.createElement)(s.__experimentalNumberControl,{label:(0,l.__)("Number of posts","teaser-list"),min:1,value:r.posts_per_page,placeholder:g.attributes.posts_per_page.default,onChange:e=>o({posts_per_page:e})}),(0,t.createElement)(s.SelectControl,{label:(0,l.__)("Sort by","teaser-list"),value:r.orderby,options:[{value:"date",label:(0,l.__)("Date")},{value:"rand",label:(0,l.__)("random","teaser-list")}],onChange:e=>o({orderby:e})}),(0,t.createElement)(s.__experimentalNumberControl,{label:(0,l.__)("Columns"),min:1,max:9,value:r.columns,placeholder:g.attributes.columns.default,onChange:e=>o({columns:e})}),(0,t.createElement)(s.TextControl,{label:(0,l.__)("Load more"),placeholder:(0,l.__)("Button text"),value:r.more,onChange:e=>o({more:e})})))))})),g=(0,r.registerBlockType)("teaser-list/block",{title:(0,l.__)("Teaser List","teaser-list"),description:(0,l.__)("Add grid of post teasers.","teaser-list"),icon:u,category:"widgets",keywords:[(0,l.__)("Testimonials","testimonial")],supports:{align:["wide","full"],color:{background:!0}},attributes:m,edit:e=>(0,t.createElement)(w,{...e}),save:function({attributes:e,...l}){const r=[];return new URLSearchParams(_(e)).forEach(((e,t)=>{r.push(`${t}="${e}"`)})),(0,t.createElement)("div",{"data-grid":e.columns,className:`${e.post_type}-teaser-list wp-block-group-is-layout-grid`},(0,t.createElement)("div",null,(0,t.createElement)(c.RawHTML,null,`[teaser-list ${r.join(" ")}]`)))}})})();